{"version":3,"sources":["actions/index.js","components/chat.jsx","App.js","reducers/index.js","sagas/index.js","store.js","serviceWorker.js","index.js"],"names":["baseUri","GETDATA","_GETDATA_SUCCESS","_GETDATA_FAIL","Chat","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","pulseInterval","messagesEndRef","chunks","mediaRecorder","myStream","recording","encoder","audio_context","node","input","stream","textInputref","scrollToBottom","scrollIntoView","behavior","componentDidUpdate","target","document","getElementById","state","record","setInterval","classList","toggle","clearInterval","sendTextMsg","e","data","value","console","log","socket","emit","componentWillMount","window","testMessage","Worker","onmessage","cmd","buf","b","FormData","append","uploader","submitFiles","File","setState","loading","error","postMessage","config","samplerate","bps","channels","compression","gotUserMedia","webkitAudioContext","AudioContext","createMediaStreamSource","context","createJavaScriptNode","createScriptProcessor","onaudioprocess","channelLeft","inputBuffer","getChannelData","connect","destination","err","getUserMedia","navigator","mediaDevices","video","audio","then","catch","stopMedia","tracks","getAudioTracks","i","length","stop","disconnect","title","messages","typeing","socketIOClient","actions","SocketIOFileUpload","on","undefined","message","concat","toConsumableArray","_this2","react_default","a","createElement","className","src","alt","map","msg","index","from","key","ref","el","placeholder","onKeyUp","which","id","onClick","setTimeout","Component","App","components_chat","initialStore","getTranscript","getTranscriptSaga","action","res","regenerator_default","wrap","_context","prev","next","fetch","method","body","payload","sent","json","put","type","t0","_marked","_context2","takeLatest","_marked2","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","arguments","objectSpread","applyMiddleware","run","mainSaga","Boolean","location","hostname","match","ReactDOM","render","es","src_App","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.87176d4b.chunk.js","sourcesContent":["export const baseUri = \"/\"; //\"https://speachtotext-anubhav.openode.io/\";\r\nexport const GETDATA = \"GETDATA\";\r\nexport const _GETDATA_SUCCESS = \"_GETDATA_SUCCESS\";\r\nexport const _GETDATA_FAIL = \"_GETDATA_FAIL\";\r\nexport const loading =\r\n  \"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\";\r\n","import React, { Component } from \"react\";\r\nimport \"../css/chat.scss\";\r\nimport * as actions from \"../actions\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport SocketIOFileUpload from \"socketio-file-upload\";\r\n\r\nclass Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: \"Speech-to-Text\",\r\n      record: false,\r\n      messages: [],\r\n      error: \"\",\r\n      typeing: false,\r\n      loading: false\r\n    };\r\n\r\n    this.socket = socketIOClient(actions.baseUri);\r\n    this.uploader = new SocketIOFileUpload(this.socket);\r\n    this.socket.on(\"message\", data => {\r\n      this.error = \"\";\r\n      if (data.message !== undefined) {\r\n        if (data.message.length === 0) {\r\n          this.setState({\r\n            error: \"Can't understand you properly!! Could you please repeat.\",\r\n            loading: false\r\n          });\r\n        } else {\r\n          this.setState({\r\n            messages: [...this.state.messages, data],\r\n            error: \"\",\r\n            loading: false\r\n          });\r\n        }\r\n      } else {\r\n        this.setState({ error: \"Server Error\", loading: false });\r\n      }\r\n    });\r\n  }\r\n  pulseInterval = null;\r\n  messagesEndRef = null;\r\n  chunks = [];\r\n  mediaRecorder = null;\r\n  myStream = null;\r\n  recording = false;\r\n  encoder = null;\r\n  audio_context = null;\r\n  node = null;\r\n  input = null;\r\n  stream = null;\r\n  textInputref = null;\r\n\r\n  scrollToBottom = () => {\r\n    this.messagesEndRef &&\r\n      this.messagesEndRef.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  componentDidUpdate = () => {\r\n    this.scrollToBottom();\r\n    let target = document.getElementById(\"record-btn\");\r\n    if (this.state.record) {\r\n      this.pulseInterval =\r\n        target &&\r\n        setInterval(() => {\r\n          target.classList.toggle(\"pulse\");\r\n        }, 700);\r\n    } else {\r\n      this.pulseInterval && clearInterval(this.pulseInterval);\r\n    }\r\n  };\r\n  sendTextMsg = e => {\r\n    if (this.textInputref) {\r\n      let data = this.textInputref.value || \"\";\r\n      this.textInputref.value = \"\";\r\n      console.log(data);\r\n      data && this.socket.emit(\"message_recieved\", { data });\r\n    }\r\n  };\r\n  componentWillMount = () => {\r\n    window.testMessage = data => {\r\n      this.socket.emit(\"message_recieved\", { data });\r\n    };\r\n    this.encoder = new Worker(\"encoder.js\");\r\n    //this.encoder.postMessage({ cmd: \"init\" });\r\n    this.encoder.onmessage = e => {\r\n      if (e.data.cmd === \"end\") {\r\n        console.log(e.data.buf);\r\n        window.b = e.data.buf;\r\n        const formData = new FormData();\r\n        formData.append(\"blob\", e.data.buf, \"temp.flac\");\r\n        this.uploader.submitFiles([new File([e.data.buf], \"temp.flac\")]);\r\n        this.setState({ loading: true });\r\n        //this.props.dispachVoice(formData);\r\n        //this.encoder.terminate();\r\n        //window.encoder = null;\r\n      } else {\r\n        console.error(\r\n          'Unknown event from encoder (WebWorker): \"' + e.data.cmd + '\"!'\r\n        );\r\n      }\r\n    };\r\n    this.encoder.postMessage({\r\n      cmd: \"init\",\r\n      config: { samplerate: 44100, bps: 16, channels: 1, compression: 5 }\r\n    });\r\n  };\r\n\r\n  gotUserMedia = stream => {\r\n    //    var mstream = new MediaStream(stream);\r\n    this.stream = stream;\r\n    if (typeof webkitAudioContext !== \"undefined\") {\r\n      this.audio_context = new window.webkitAudioContext();\r\n    } else if (typeof AudioContext !== \"undefined\") {\r\n      this.audio_context = new window.AudioContext();\r\n    }\r\n    this.input = this.audio_context.createMediaStreamSource(stream);\r\n    if (this.input.context.createJavaScriptNode)\r\n      this.node = this.input.context.createJavaScriptNode(4096, 1, 1);\r\n    else if (this.input.context.createScriptProcessor)\r\n      this.node = this.input.context.createScriptProcessor(4096, 1, 1);\r\n    this.encoder.postMessage({\r\n      cmd: \"init\",\r\n      config: { samplerate: 44100, bps: 16, channels: 1, compression: 5 }\r\n    });\r\n    this.node.onaudioprocess = e => {\r\n      //if (this.recording) return;\r\n      // see also: http://typedarray.org/from-microphone-to-wav-with-getusermedia-and-web-audio/\r\n      var channelLeft = e.inputBuffer.getChannelData(0);\r\n      // var channelRight = e.inputBuffer.getChannelData(1);\r\n      this.encoder.postMessage({ cmd: \"encode\", buf: channelLeft });\r\n    };\r\n    this.input && this.input.connect(this.node);\r\n    this.node && this.node.connect(this.audio_context.destination);\r\n  };\r\n  error = err => {\r\n    console.log(\"err\", err);\r\n  };\r\n  getUserMedia = () => {\r\n    this.recording = true;\r\n    console.log(\"getUserMedia supported.\");\r\n    // if (navigator.webkitGetUserMedia)\r\n    //   navigator.webkitGetUserMedia(\r\n    //     { video: false, audio: true },\r\n    //     this.gotUserMedia,\r\n    //     this.error\r\n    //   );\r\n    // else if (navigator.mozGetUserMedia)\r\n    //   navigator.mozGetUserMedia(\r\n    //     { video: false, audio: true },\r\n    //     this.gotUserMedia,\r\n    //     this.error\r\n    //   );\r\n    // else\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: false, audio: true })\r\n      .then(this.gotUserMedia)\r\n      .catch(this.error);\r\n  };\r\n  stopMedia = () => {\r\n    if (this.recording) {\r\n      this.recording = false;\r\n      console.log(\"stop recording\");\r\n      if (!this.stream) {\r\n        console.log(\"error\");\r\n        return;\r\n      }\r\n      var tracks = this.stream.getAudioTracks();\r\n      for (var i = tracks.length - 1; i >= 0; --i) {\r\n        tracks[i].stop();\r\n      }\r\n      this.encoder.postMessage({ cmd: \"finish\" });\r\n\r\n      this.input && this.input.disconnect();\r\n      this.node && this.node.disconnect();\r\n      this.input = this.node = null;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"content\">\r\n        <div className=\"contact-profile\">\r\n          <img src=\"/harveyspecter.png\" alt=\"\" />\r\n          <p className=\"mx-auto\">{this.state.title}</p>\r\n        </div>\r\n        <div className=\"messages\">\r\n          <ul>\r\n            {this.state.messages.length > 0 &&\r\n              this.state.messages.map((msg, index) => {\r\n                return (\r\n                  (msg.from === \"me\" && (\r\n                    <li\r\n                      key={index}\r\n                      className=\"replies\"\r\n                      ref={el => {\r\n                        this.messagesEndRef = el;\r\n                      }}\r\n                    >\r\n                      <img src=\"/mikeross.png\" alt=\"\" />\r\n                      <p>{msg.message}</p>\r\n                    </li>\r\n                  )) || (\r\n                    <li\r\n                      key={index}\r\n                      className=\"sent\"\r\n                      ref={el => {\r\n                        this.messagesEndRef = el;\r\n                      }}\r\n                    >\r\n                      <img src=\"/harveyspecter.png\" alt=\"\" />\r\n                      <p>{msg.message}</p>\r\n                    </li>\r\n                  )\r\n                );\r\n              })}\r\n          </ul>\r\n        </div>\r\n        <div className=\"message-input mb-3\">\r\n          <div className=\"wrap\">\r\n            {this.state.error && this.state.error.length > 0 && (\r\n              <div className=\"error-msg\">\r\n                <div className=\"my-4 btn btn-outline-danger disabled error-msg\">\r\n                  {this.state.error}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"recordcontainer\">\r\n              {this.state.typeing ? (\r\n                <div className=\"tempdiv\">\r\n                  <span className=\"textInputSpan ml-2\">\r\n                    <input\r\n                      className=\"textInput\"\r\n                      ref={el => (this.textInputref = el)}\r\n                      placeholder=\"start typing here\"\r\n                      onKeyUp={e => {\r\n                        if (e.which === 13) {\r\n                          this.sendTextMsg();\r\n                        }\r\n                      }}\r\n                    />\r\n                  </span>\r\n                  <button\r\n                    id=\"msg-send-btn\"\r\n                    className=\"buttonSend\"\r\n                    onClick={this.sendTextMsg}\r\n                  >\r\n                    <i className=\"fa fa-angle-double-up fa-10x\" />\r\n                  </button>\r\n                </div>\r\n              ) : this.state.record ? (\r\n                <button\r\n                  id=\"record-btn\"\r\n                  className=\"buttonMic\"\r\n                  onClick={e => {\r\n                    this.setState({ record: !this.state.record });\r\n                    setTimeout(this.stopMedia, 1000);\r\n                  }}\r\n                >\r\n                  <i className=\"fa fa-stop fa-10x\" />\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  id=\"record-btn\"\r\n                  className=\"buttonMic\"\r\n                  onClick={e => {\r\n                    this.setState({ record: !this.state.record });\r\n                    this.getUserMedia();\r\n                  }}\r\n                >\r\n                  {this.state.loading ? (\r\n                    <img src={actions.loading} alt=\"\" />\r\n                  ) : (\r\n                    <i className=\"fa fa-microphone fa-10x\" />\r\n                  )}\r\n                </button>\r\n              )}\r\n\r\n              <button\r\n                id=\"type-btn\"\r\n                className=\"mr-2 buttonType\"\r\n                title={this.state.typeing ? \"Speek Instead\" : \"Type Instead\"}\r\n                onClick={e => {\r\n                  this.setState({ typeing: !this.state.typeing });\r\n                }}\r\n              >\r\n                {this.state.typeing ? (\r\n                  <i className=\"fa fa-microphone fa-10x\" />\r\n                ) : (\r\n                  <i className=\"fa fa-pencil fa-10x\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Chat;\r\n","import React, { Component } from \"react\";\nimport \"./css/App.scss\";\nimport Chat from \"./components/chat\";\n\nclass App extends Component {\n  render() {\n    return <Chat />;\n  }\n}\n\nexport default App;\n","import * as actions from \"../actions\";\r\n\r\nconst initialStore = {\r\n  loading: false,\r\n  error: \"\",\r\n  messages: []\r\n};\r\nexport default function reducer(store = initialStore, action) {\r\n  switch (action.type) {\r\n    case actions._GETDATA_SUCCESS:\r\n      return {\r\n        ...store,\r\n        messages: [...store.messages, action.payload],\r\n        loading: false\r\n      };\r\n    case actions._GETDATA_FAIL:\r\n      return {\r\n        ...store,\r\n        error: action.payload,\r\n        loading: false\r\n      };\r\n    case actions.GETDATA:\r\n      return {\r\n        ...store,\r\n        loading: true\r\n      };\r\n    default:\r\n      return store;\r\n  }\r\n}\r\n","import { takeLatest, put } from \"redux-saga/effects\";\r\nimport * as actions from \"../actions\";\r\n\r\nfunction* getTranscript(action) {\r\n  try {\r\n    let res = yield fetch(actions.baseUri + \"voice\", {\r\n      method: \"POST\",\r\n      body: action.payload\r\n    });\r\n    res = yield res.json();\r\n    if (res && res.message && res.message.length > 0) {\r\n      console.log(res);\r\n      yield put({ type: actions._GETDATA_SUCCESS, payload: res });\r\n    } else {\r\n      yield put({\r\n        type: actions._GETDATA_FAIL,\r\n        payload: \"Can't hear you properly!! COuld you please repeat.\"\r\n      });\r\n    }\r\n  } catch {\r\n    yield put({\r\n      type: actions._GETDATA_FAIL,\r\n      payload: \"SERVER ERROR\"\r\n    });\r\n  }\r\n}\r\nexport function* getTranscriptSaga() {\r\n  yield takeLatest(actions.GETDATA, getTranscript);\r\n}\r\nexport default getTranscriptSaga;\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport reducer from \"./reducers\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport mainSaga from \"./sagas\";\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducer,\r\n  composeEnhancers(applyMiddleware(sagaMiddleware))\r\n);\r\nsagaMiddleware.run(mainSaga);\r\n\r\nexport default store;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"frame\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}